version: 2.1
executors:
  exec_env:
    docker:
        - image: ubuntu:latest
jobs:
  setup:
    executor: exec_env
    steps:
      - checkout
      - run: apt-get update -yqq
      - run: apt-get install software-properties-common -yqq
      - run: add-apt-repository ppa:deadsnakes/ppa -y
      - run: apt-get update -yqq
      - run: apt-get install python3.8 -yqq
      - run: apt-get install curl -yqq
      - run: apt-get install docker-compose -yqq
      - run: curl ifconfig.co
      - run: ls -l
      - run: docker-compose up -d
     # - run: curl localhost
  build:
    executor: exec_env
    steps:
      - checkout
      - run: ls -l
#      - run: docker-compose up -d
        
workflows:
  version: 2
  setup_build: #name of workflows
    jobs:
      - setup
      - build:
          requires:
           - setup
          filters:
            branches:
              only:
               - master
